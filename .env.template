# HD현대미포 Gauss-1 RAG System Environment Configuration
# Copy this file to .env and configure your specific values

# === REQUIRED CONFIGURATION ===
# Python Encoding (Windows Korean Environment)
PYTHONIOENCODING=utf-8

# Ollama LLM Service
RAG_OLLAMA_URL=http://127.0.0.1:11434/api/chat
OLLAMA_ENDPOINT=http://127.0.0.1:11434
OLLAMA_HOST=127.0.0.1
OLLAMA_PORT=11434
OLLAMA_MAX_CONCURRENCY=8

# === DUAL QDRANT ROUTING CONFIGURATION ===
# Personal (Local) Qdrant Instance
QDRANT_PERSONAL_HOST=127.0.0.1
QDRANT_PERSONAL_PORT=6333
QDRANT_PERSONAL_TIMEOUT=15

# Department Qdrant Instance  
QDRANT_DEPT_HOST=10.150.104.37
QDRANT_DEPT_PORT=6333
QDRANT_DEPT_TIMEOUT=20

# Namespace Pattern for Dynamic Collection Names
# Variables: {scope}, {env}, {source}
NAMESPACE_PATTERN={scope}_{env}_{source}_my_documents

# Default Scope Selection (personal | dept)
DEFAULT_DB_SCOPE=personal

# Fallback Configuration
QDRANT_DEPT_FALLBACK=personal
QDRANT_FALLBACK_NOTIFY=true

# Connection Pool Settings
QDRANT_MAX_CONNECTIONS=10
QDRANT_CONNECTION_TIMEOUT=5

# Legacy Compatibility (for existing code)
MAIL_QDRANT_URL=http://127.0.0.1:6333
DOC_QDRANT_URL=http://127.0.0.1:6333
RAG_MAIL_QDRANT_HOST=127.0.0.1
RAG_MAIL_QDRANT_PORT=6333
RAG_DOC_QDRANT_HOST=127.0.0.1
RAG_DOC_QDRANT_PORT=6333

# Environment Setting (dev | prod)
QDRANT_ENV=prod

# === EMBEDDING CONFIGURATION ===
# Embedding Backend (st | ollama)
# Use 'st' if sentence_transformers is installed
# Use 'ollama' if only Ollama is available
EMBED_BACKEND=st

# Embedding Model Path (for sentence_transformers)
# Replace with your actual BGE-M3 model path
EMBED_MODEL=C:\Users\lseun\Documents\LMM_UI_APP\src\bin\bge-m3-local

# Embedding Device (cpu | cuda)
EMBED_DEVICE=cpu

# Embedding Batch Size
EMBED_BATCH=32

# Cache Settings
EMBED_CACHE_MAX=512
NORMALIZE_EMBEDDINGS=true

# Qdrant Search Tuning
QDRANT_HNSW_EF=128
QDRANT_EXACT=false

# === OPTIONAL CONFIGURATION ===
# Debug and Logging
RAG_DEBUG=false
RAG_VERBOSE=false
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_REDACT_PII=true
SECURITY_AUDIT_ENABLED=true

# Security Configuration
JWT_SECRET_KEY=your-secret-key-here
API_KEY_NAME=X-API-Key
ALLOWED_ORIGINS=http://localhost:8080,http://localhost:8001,http://127.0.0.1:8080,http://127.0.0.1:8001

# CORS Configuration (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:8080,http://localhost:8001,http://127.0.0.1:8080,http://127.0.0.1:8001

# Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_REQUESTS_PER_HOUR=1000

# Metrics and Monitoring
METRICS_ENABLED=true
METRICS_NAMESPACE=rag

# === Phase 2A-1: ResourceManager 현실적 설정 ===
# HTTP 클라이언트 설정
HTTP_TIMEOUT_MS=3000
HTTP_MAX_KEEPALIVE=20

# 재시도 정책
RETRY_MAX=3
RETRY_BACKOFF_MS=200

# Circuit Breaker - 운영 지표 기반 (현실적)
CB_ERROR_THRESHOLD=0.20
CB_P95_THRESHOLD_MS=5000
CB_QUEUE_THRESHOLD=64
CB_WINDOW_SECONDS=30
CB_RECOVERY_SECONDS=10

# 큐 관리
QUEUE_MAX_SIZE=64

# === GITHUB INTEGRATION (Keep in CLAUDE.md) ===
# GitHub repository and token info should remain in CLAUDE.md
# Do not store sensitive tokens in .env files that might be committed

# === PRODUCTION OVERRIDES ===
# Uncomment and configure for production deployment
# RAG_OLLAMA_URL=https://your-ollama-instance.com/api/chat
# RAG_MAIL_QDRANT_HOST=your-qdrant-host.com
# CORS_ALLOWED_ORIGINS=https://your-domain.com
