# P1-1 Integration Test Environment Configuration
# Copy to .env for testing

# API Security (minimal for testing)
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:8000

# Embedding Configuration
# Use 'ollama' if sentence_transformers not installed
# Use 'st' if sentence_transformers is installed
EMBED_BACKEND=st
EMBED_MODEL=C:\Users\lseun\Documents\LMM_UI_APP\src\bin\bge-m3-local
EMBED_DEVICE=cpu

# Ollama Configuration
OLLAMA_HOST=127.0.0.1
OLLAMA_PORT=11434
OLLAMA_ENDPOINT=http://127.0.0.1:11434

# Qdrant Configuration
QDRANT_HOST=127.0.0.1
QDRANT_PORT=6333
MAIL_QDRANT_URL=http://127.0.0.1:6333
DOC_QDRANT_URL=http://127.0.0.1:6333

# Collection Namespace (for dynamic naming)
QDRANT_NAMESPACE=test
QDRANT_ENV=dev

# Python Encoding (Windows)
PYTHONIOENCODING=utf-8

# Logging (P1-3 Enhanced)
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_REDACT_PII=true
SECURITY_AUDIT_ENABLED=true

# Metrics (P1-4 Monitoring)
METRICS_ENABLED=true
METRICS_NAMESPACE=rag

# P1-6 Performance Optimization
EMBED_CACHE_MAX=512        # Expanded cache (5x increase)
EMBED_DEVICE=cpu           # Explicit CPU for now
EMBED_DTYPE=float32        # CPU optimal
EMBED_BATCH=32             # CPU batch size
NORMALIZE_EMBEDDINGS=true  # Enable normalization
# Qdrant search tuning
QDRANT_HNSW_EF=128        # Increase recall
QDRANT_EXACT=false        # Use ANN for speed

# === Dual Qdrant Routing Configuration ===

# Personal (Local) Qdrant Instance
QDRANT_PERSONAL_HOST=127.0.0.1
QDRANT_PERSONAL_PORT=6333
QDRANT_PERSONAL_TIMEOUT=15  # seconds

# Department Qdrant Instance  
QDRANT_DEPT_HOST=10.150.104.37
QDRANT_DEPT_PORT=6333
QDRANT_DEPT_TIMEOUT=20  # seconds

# Namespace Pattern
# Variables: {scope}, {env}, {source}
NAMESPACE_PATTERN={scope}_{env}_{source}_my_documents

# Default Scope Selection
DEFAULT_DB_SCOPE=personal  # personal | dept

# Fallback Configuration
QDRANT_DEPT_FALLBACK=personal  # Fallback to personal if dept fails
QDRANT_FALLBACK_NOTIFY=true    # Notify user on fallback

# Namespace Compatibility Mode
NAMESPACE_COMPAT_ENABLED=true
NAMESPACE_COMPAT_FALLBACK=mail_my_documents,doc_my_documents,my_documents

# Connection Pool Settings
QDRANT_MAX_CONNECTIONS=10
QDRANT_CONNECTION_TIMEOUT=5